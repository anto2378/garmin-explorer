# ğŸƒâ€â™‚ï¸ Garmin Companion System

> **FINALIZED** - Multi-user Garmin activity tracking with automated weekly digests

## ğŸš€ Quick Start

### 1. Start the System
```bash
docker-compose up -d
```

### 2. Test the System
```bash
python final_simple_command.py
```

### 3. Access the API
- **Web Interface**: http://localhost:8000
- **API Documentation**: http://localhost:8000/docs
- **Health Check**: http://localhost:8000/health

## ğŸ” User Credentials

The system supports 2-3 users with credentials stored in `.env`:

```
ğŸ‘¤ user1@example.com / admin123 (Admin)
ğŸ‘¤ user2@example.com / user123 (Member) 
ğŸ‘¤ user3@example.com / user456 (Member)
```

**Real Garmin Account**: `antosidoti@gmail.com` with password configured in `.env`

## ğŸ“Š Features

### âœ… Complete System
- **Multi-User Support**: Simple authentication via .env credentials
- **Activity Tracking**: Automated Garmin Connect sync
- **Group Management**: Create groups and manage members
- **Weekly Digests**: Comprehensive activity analysis and reporting
- **WhatsApp Integration**: Formatted messages ready for WhatsApp Business API
- **Background Tasks**: Automated scheduling and processing

### ğŸ“± Weekly Digest Capabilities
- Group activity summaries (distance, time, calories)
- Individual member leaderboards
- Achievement detection and celebrations
- Week-over-week improvement tracking
- Activity type analysis and trends

## ğŸ› ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Garmin Companion              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FastAPI Web Application                â”‚
â”‚  â€¢ Simple Auth (no JWT)                â”‚  
â”‚  â€¢ RESTful API                          â”‚
â”‚  â€¢ Interactive Documentation            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Services Layer                         â”‚
â”‚  â€¢ Multi-User Garmin Integration        â”‚
â”‚  â€¢ Weekly Digest Generation             â”‚
â”‚  â€¢ WhatsApp Message Formatting          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer                             â”‚
â”‚  â€¢ PostgreSQL Database                  â”‚
â”‚  â€¢ Redis Cache & Message Queue          â”‚
â”‚  â€¢ Celery Background Tasks              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ API Endpoints

### Authentication
- `POST /api/v1/simple-auth/login` - Simple login
- `GET /api/v1/simple-auth/status` - Check auth status
- `POST /api/v1/simple-auth/logout` - Logout

### Activities  
- `GET /api/v1/activities/` - List activities
- `GET /api/v1/activities/stats` - Activity statistics
- `POST /api/v1/activities/sync` - Sync from Garmin

### Groups
- `GET /api/v1/groups/` - List user groups
- `POST /api/v1/groups/` - Create group
- `GET /api/v1/groups/{id}/members` - Group members

### Weekly Digest
- `GET /api/v1/digest/{group_id}/preview` - Preview digest
- `POST /api/v1/digest/{group_id}/send` - Generate and send digest

## ğŸ”§ Configuration

All configuration is stored in `.env`:

```env
# Multi-User Configuration
USER1_EMAIL=user1@example.com
USER1_PASSWORD=admin123
USER1_GARMIN_EMAIL=your-garmin@gmail.com
USER1_GARMIN_PASSWORD=your-garmin-password

# WhatsApp Integration  
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_API_TOKEN=your-token
DEFAULT_WHATSAPP_GROUP_ID=your-group-id@g.us

# System Settings
DIGEST_SCHEDULE=0 8 * * 1  # Mondays 8 AM
SYNC_SCHEDULE=0 6 * * *    # Daily 6 AM
```

## ğŸŒ Production Deployment

See [DEPLOYMENT_GUIDE.md](DEPLOYMENT_GUIDE.md) for complete deployment instructions.

### Quick Production Steps:
1. Update `.env` with production credentials
2. Configure WhatsApp Business API
3. Deploy with `docker-compose up -d`
4. Monitor with health checks

## ğŸ“Š Sample Weekly Digest

```
ğŸƒâ€â™‚ï¸ *Fitness Crew Weekly Digest*
ğŸ“… Week 35 Summary

ğŸ“Š *GROUP SUMMARY*  
â€¢ Total Activities: 12
â€¢ Total Distance: 156.2km
â€¢ Total Time: 8.3h
â€¢ Total Calories: 4,890
â€¢ Most Popular: Running

ğŸ† *TOP PERFORMERS*
ğŸ¥‡ Most Active: Admin User (5 activities)
ğŸ¥‡ Longest Distance: User Two (67.3km) 
ğŸ¥‡ Most Calories: User Three (1,820 cal)

ğŸ‰ *ACHIEVEMENTS*
ğŸ† Admin User increased activities by 3 this week! ğŸ“ˆ
ğŸ¥ˆ User Two hit 67.3km this week! ğŸƒâ€â™‚ï¸
ğŸ”¥ User Three was active every day this week! âš¡

Keep up the great work, everyone! ğŸ’ª
Generated by Garmin Companion System
```

## ğŸ‰ Project Status: **COMPLETE**

The Garmin Companion System is **finalized** and ready for production use with:

âœ… **Multi-user authentication** (simple, .env-based)  
âœ… **Automated activity syncing** from Garmin Connect  
âœ… **Weekly digest generation** with analytics  
âœ… **WhatsApp integration** (Business API ready)  
âœ… **Background task processing** with scheduling  
âœ… **Complete API documentation** at `/docs`  
âœ… **Production deployment** guide  

---

**Built for**: Fitness teams wanting automated weekly activity summaries  
**Technology**: FastAPI, PostgreSQL, Redis, Celery, Docker  
**Integration**: Garmin Connect API, WhatsApp Business API